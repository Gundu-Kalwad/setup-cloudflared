name: Global Server with Pinggy
on: workflow_dispatch

jobs:
  tunnel:
    runs-on: ubuntu-latest
    steps:
      - name: Start Global Tunnel
        run: |
          # 1. Start a simple web server in the background
          python3 -m http.server 8080 & 
          
          # 2. Connect to Pinggy using the 'a.pinggy.io' address
          # The -T flag prevents the "Pseudo-terminal" error
          ssh -T -o StrictHostKeyChecking=no -p 443 -R0:localhost:8080 a.pinggy.io
