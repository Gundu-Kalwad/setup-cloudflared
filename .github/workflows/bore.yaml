name: Ultimate Minecraft Bedrock
on: workflow_dispatch

jobs:
  run-server:
    runs-on: ubuntu-latest
    steps:
      - name: Start Minecraft & Bore Tunnel
        run: |
          # 1. Start Minecraft Bedrock
          docker run -d --network host -e EULA=TRUE itzg/minecraft-bedrock-server
          
          # 2. Start Bore Tunnel via Docker (Fixes the download error)
          # This will expose UDP port 19132
          docker run -d --network host ekzhang/bore local 19132 --to bore.pub
          
          echo "Waiting 60s for full startup..."
          sleep 60
          
          # 3. Print the logs so you can see your PORT
          docker logs $(docker ps -q --filter ancestor=ekzhang/bore)
