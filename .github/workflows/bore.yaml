name: Ultimate Minecraft Bedrock
on: workflow_dispatch

jobs:
  run-server:
    runs-on: ubuntu-latest
    steps:
      - name: Start Minecraft via Docker
        run: |
          # 1. Run the most popular Bedrock Docker image
          # This avoids all the 'unzip' and 'curl' errors
          docker run -d -e EULA=TRUE -p 19132:19132/udp itzg/minecraft-bedrock-server
          
          echo "Server is booting in Docker..."
          sleep 30

      - name: Tunnel via Pinggy (UDP Mode)
        run: |
          # We use the -T and -o flags to force SSH to work in GitHub's fake terminal
          ssh -T -o StrictHostKeyChecking=no -p 443 -R0:localhost:19132 u@a.pinggy.io
